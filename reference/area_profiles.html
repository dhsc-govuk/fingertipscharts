<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot spine chart — area_profiles • fingertipscharts</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot spine chart — area_profiles"><meta name="description" content="Returns ggplot of spine chart"><meta property="og:description" content="Returns ggplot of spine chart"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fingertipscharts</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.15</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/quick_charts.html">Producing charts available on Fingertips</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PublicHealthEngland/fingertipscharts/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot spine chart</h1>
      <small class="dont-index">Source: <a href="https://github.com/PublicHealthEngland/fingertipscharts/blob/master/R/quick_charts.R" class="external-link"><code>R/quick_charts.R</code></a></small>
      <div class="d-none name"><code>area_profiles.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns ggplot of spine chart</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">area_profiles</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">value</span>,</span>
<span>  <span class="va">count</span>,</span>
<span>  <span class="va">area_code</span>,</span>
<span>  <span class="va">local_area_code</span>,</span>
<span>  <span class="va">indicator</span>,</span>
<span>  <span class="va">timeperiod</span>,</span>
<span>  trend <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="va">polarity</span>,</span>
<span>  <span class="va">significance</span>,</span>
<span>  <span class="va">area_type</span>,</span>
<span>  cols <span class="op">=</span> <span class="st">"fingertips"</span>,</span>
<span>  median_line_area_code <span class="op">=</span> <span class="st">"E92000001"</span>,</span>
<span>  comparator_area_code <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  bar_width <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  local_point_shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>  local_point_outline <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  comparator_point_shape <span class="op">=</span> <span class="fl">23</span>,</span>
<span>  comparator_point_outline <span class="op">=</span> <span class="st">"gray30"</span>,</span>
<span>  comparator_point_fill <span class="op">=</span> <span class="st">"gray30"</span>,</span>
<span>  relative_point_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  relative_text_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  header_positions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.83</span>, <span class="op">-</span><span class="fl">1.13</span>, <span class="op">-</span><span class="fl">0.53</span>, <span class="op">-</span><span class="fl">0.35</span>, <span class="op">-</span><span class="fl">0.25</span>, <span class="op">-</span><span class="fl">0.15</span>, <span class="op">-</span><span class="fl">0.05</span>, <span class="fl">1.05</span><span class="op">)</span>,</span>
<span>  header_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Indicator"</span>, <span class="st">"Trend"</span>, <span class="st">"Time\nperiod"</span>, <span class="st">"Local\ncount"</span>,</span>
<span>    <span class="st">"Local\nvalue"</span>, <span class="st">"England\nvalue"</span>, <span class="st">"Worst/\nLowest"</span>, <span class="st">"Best/\nHighest"</span><span class="op">)</span>,</span>
<span>  indicator_label_nudgex <span class="op">=</span> <span class="op">-</span><span class="fl">0.075</span>,</span>
<span>  domain <span class="op">=</span> <span class="va">no_domains</span>,</span>
<span>  relative_domain_text_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  show_dividers <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  datatable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  datatable_line_height <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>  dps <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  percent_display <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  arrow_length <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  arrow_thickness <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  arrow_head_length <span class="op">=</span> <span class="va">arrow_length</span><span class="op">/</span><span class="fl">3</span>,</span>
<span>  arrow_head_angle <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  horizontal_arrow_multiplier <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data frame to create the spine chart from. The data frame
should contain records for all area types included in the chart (eg, if
plotting for County &amp; UA with a comparator of region and a median line for
national, the data frame should contain records for all of these data). The
minimum field requirements in the data frame are; value, count, area_code,
indicator, timeperiod, polarity, significance, area_type. See below for the
definitions of these fields</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>unquoted field name for the field containing the values to be
plotted</p></dd>


<dt id="arg-count">count<a class="anchor" aria-label="anchor" href="#arg-count"></a></dt>
<dd><p>unquoted field name for the field where the count (numerator) is
stored. This is provided to the accompanying data table</p></dd>


<dt id="arg-area-code">area_code<a class="anchor" aria-label="anchor" href="#arg-area-code"></a></dt>
<dd><p>unquoted field name for the field where area codes are
stored (local_area_code, median_line_area_code and comparator_area_code, if
using, should all exist in this field)</p></dd>


<dt id="arg-local-area-code">local_area_code<a class="anchor" aria-label="anchor" href="#arg-local-area-code"></a></dt>
<dd><p>string; the code of the area whose data is being
presented</p></dd>


<dt id="arg-indicator">indicator<a class="anchor" aria-label="anchor" href="#arg-indicator"></a></dt>
<dd><p>unquoted field name for the field of the field containing
the indicator labels. Take care as errors will occur where indicator labels
are the same but data exist for multiple sub-categories (for example, sex
or age)</p></dd>


<dt id="arg-timeperiod">timeperiod<a class="anchor" aria-label="anchor" href="#arg-timeperiod"></a></dt>
<dd><p>unquoted field name for the field of the time period field.
This gets used in the accompanying data table</p></dd>


<dt id="arg-trend">trend<a class="anchor" aria-label="anchor" href="#arg-trend"></a></dt>
<dd><p>unquoted field name for the field of the trend field; if the
user doesn't want to display trend information then leave this incomplete
and amend the header_labels argument by replacing the "Trend" header with
"". Text within this field should contain one of the following words to
control the arrows that are displayed; "decreasing", "increasing", "no
significant change", "could not be calculated". The text within this field
should contain one of the following words to control the colour; "better",
"worse", "no significant change". If none of these words appear in the
string, the words "increasing" or "decreasing" will be used to colour the
arrows in different shades of blue</p></dd>


<dt id="arg-polarity">polarity<a class="anchor" aria-label="anchor" href="#arg-polarity"></a></dt>
<dd><p>unquoted field name for the field containing the polarity
information (currently only handles "Not applicable", "RAG - Low is good",
"RAG - High is good", "BOB - Blue orange blue")</p></dd>


<dt id="arg-significance">significance<a class="anchor" aria-label="anchor" href="#arg-significance"></a></dt>
<dd><p>unquoted field name for the field describing the
statistical significance for that indicator. This determines the colour of
the point within the spine for the area. Colours are built in for the
following significances; 'Better', 'Same', 'Worse', 'Not compared', 'None',
'Higher', 'Similar', 'Lower'. Use the cols argument to colour other
significance values</p></dd>


<dt id="arg-area-type">area_type<a class="anchor" aria-label="anchor" href="#arg-area-type"></a></dt>
<dd><p>unquoted field name for the field containing area type
information. This ensures the vertabra are only plotted for the same area
types as the local_area area type (eg, when plotting a spine chart for
County &amp; UA areas, regions and national area types will be removed)</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>named character vector for the cols that will be applied to the
significance field. The names should contain all of the levels in the
significance field of the data frame. Defaults to the Fingertips colours</p></dd>


<dt id="arg-median-line-area-code">median_line_area_code<a class="anchor" aria-label="anchor" href="#arg-median-line-area-code"></a></dt>
<dd><p>string; area code for the median line. Defaults
to "E92000001" (England)</p></dd>


<dt id="arg-comparator-area-code">comparator_area_code<a class="anchor" aria-label="anchor" href="#arg-comparator-area-code"></a></dt>
<dd><p>string; area code for the comparator point.
Defaults to NA</p></dd>


<dt id="arg-bar-width">bar_width<a class="anchor" aria-label="anchor" href="#arg-bar-width"></a></dt>
<dd><p>numeric value; the distance between bars (0 to 1)</p></dd>


<dt id="arg-local-point-shape">local_point_shape<a class="anchor" aria-label="anchor" href="#arg-local-point-shape"></a></dt>
<dd><p>numeric value; shape type for local area point
(defaults to 21, circle). See ggplot2 shape types for different values</p></dd>


<dt id="arg-local-point-outline">local_point_outline<a class="anchor" aria-label="anchor" href="#arg-local-point-outline"></a></dt>
<dd><p>string; control colour of the outline of the local
point in the spine chart</p></dd>


<dt id="arg-comparator-point-shape">comparator_point_shape<a class="anchor" aria-label="anchor" href="#arg-comparator-point-shape"></a></dt>
<dd><p>numeric value; shape type for regional area
point (defaults to 23, diamond). See ggplot2 shape types for different
values</p></dd>


<dt id="arg-comparator-point-outline">comparator_point_outline<a class="anchor" aria-label="anchor" href="#arg-comparator-point-outline"></a></dt>
<dd><p>string; control colour of the outline of the
regional point in the spine chart</p></dd>


<dt id="arg-comparator-point-fill">comparator_point_fill<a class="anchor" aria-label="anchor" href="#arg-comparator-point-fill"></a></dt>
<dd><p>string; control the fill colour of the regional
point in the spine chart</p></dd>


<dt id="arg-relative-point-size">relative_point_size<a class="anchor" aria-label="anchor" href="#arg-relative-point-size"></a></dt>
<dd><p>numeric value; control the size of the points on
the spine chart</p></dd>


<dt id="arg-relative-text-size">relative_text_size<a class="anchor" aria-label="anchor" href="#arg-relative-text-size"></a></dt>
<dd><p>numeric value; control the size of the text in the
accompanying table</p></dd>


<dt id="arg-header-positions">header_positions<a class="anchor" aria-label="anchor" href="#arg-header-positions"></a></dt>
<dd><p>numeric vector; used to adjust columns of data table
if they are overlapping. The final value shouldn't be less than 1. Must
have a length of 7, if not using the trend argument, or 8 otherwise.
Defaults to c(-1.83, -1.13, -.53, -.35, -.25, -.15, -0.05, 1.05)</p></dd>


<dt id="arg-header-labels">header_labels<a class="anchor" aria-label="anchor" href="#arg-header-labels"></a></dt>
<dd><p>character vector; labels used for the titles of the
columns for a data table. Must have a length of 7, if not using the trend
argument, or 8 otherwise. Defaults to c("Indicator", "Trend", "Time
period", "Local count","Local value", "England value",
"Worst/Lowest","Best/Highest")</p></dd>


<dt id="arg-indicator-label-nudgex">indicator_label_nudgex<a class="anchor" aria-label="anchor" href="#arg-indicator-label-nudgex"></a></dt>
<dd><p>number; nudge the placement of the indicator
label in the x direction. Negative values nudge to the left</p></dd>


<dt id="arg-domain">domain<a class="anchor" aria-label="anchor" href="#arg-domain"></a></dt>
<dd><p>unquoted field name for the field describing the grouping of
the domains if wishing to split the spine chart into domains</p></dd>


<dt id="arg-relative-domain-text-size">relative_domain_text_size<a class="anchor" aria-label="anchor" href="#arg-relative-domain-text-size"></a></dt>
<dd><p>numeric; control the text size for the
domain labels (if include.domains = TRUE) relative to 1</p></dd>


<dt id="arg-show-dividers">show_dividers<a class="anchor" aria-label="anchor" href="#arg-show-dividers"></a></dt>
<dd><p>string; whether to display horizontal lines between
indicators. Values can be "all" or "outer". Any other value will not
generate lines</p></dd>


<dt id="arg-datatable">datatable<a class="anchor" aria-label="anchor" href="#arg-datatable"></a></dt>
<dd><p>logical; default = TRUE, display data table alongside spine
chart</p></dd>


<dt id="arg-datatable-line-height">datatable_line_height<a class="anchor" aria-label="anchor" href="#arg-datatable-line-height"></a></dt>
<dd><p>number; height of wrapped lines in the data
table</p></dd>


<dt id="arg-dps">dps<a class="anchor" aria-label="anchor" href="#arg-dps"></a></dt>
<dd><p>number; number of decimal places to be displayed in the data
table. The default is 1. Set to NA if this should be the same as the input
data</p></dd>


<dt id="arg-percent-display">percent_display<a class="anchor" aria-label="anchor" href="#arg-percent-display"></a></dt>
<dd><p>number between 0 and 1; the percentage of values that
needs to exist for a spine to display. Default is 0.25</p></dd>


<dt id="arg-arrow-length">arrow_length<a class="anchor" aria-label="anchor" href="#arg-arrow-length"></a></dt>
<dd><p>number to control the length of the trend arrow</p></dd>


<dt id="arg-arrow-thickness">arrow_thickness<a class="anchor" aria-label="anchor" href="#arg-arrow-thickness"></a></dt>
<dd><p>number to control the thickness of the trend arrow</p></dd>


<dt id="arg-arrow-head-length">arrow_head_length<a class="anchor" aria-label="anchor" href="#arg-arrow-head-length"></a></dt>
<dd><p>number to control the length of the arrow head</p></dd>


<dt id="arg-arrow-head-angle">arrow_head_angle<a class="anchor" aria-label="anchor" href="#arg-arrow-head-angle"></a></dt>
<dd><p>number to control the angle of the arrow head</p></dd>


<dt id="arg-horizontal-arrow-multiplier">horizontal_arrow_multiplier<a class="anchor" aria-label="anchor" href="#arg-horizontal-arrow-multiplier"></a></dt>
<dd><p>number to scale horizontal trend arrows. A
value below 1 will shorten the arrows</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a ggplot object containing a spine chart</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function draws a bar chart (which is the spine) and then plots
  the data table (if datatable = TRUE) using geom_text. The bar chart is
  always plotted between 0 and 1 on the x scale, which isn't visible in the
  output. The column locations in the data table are controlled by the
  header_positions argument. To adjust the length of the bars in the
  visualisation, amend the header_positions argument. The more negative the
  first value of the vector that goes into header_positions, the more
  condensed the bar part of the visualisation will be.</p>
<p>This function filters for the area type that is the same as your
  local area type and then calculates the "vertebra" from those data.
  Therefore, if you are comparing outputs with those seen on the Fingertips
  website, ensure you perform the same preprocessing. For example, some
  profiles display spine charts where small areas, such as Isles of Scilly,
  are removed before the spine is produced.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## An example with differing decimal places for individual indicators and no trend</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_test_data.html">create_test_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Value <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"2$|4$|6$"</span>, <span class="va">IndicatorName</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">Value</span>,<span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        <span class="cn">TRUE</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">Value</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">full_p</span> <span class="op">&lt;-</span> <span class="fu">area_profiles</span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>                        value <span class="op">=</span> <span class="va">Value</span>,</span></span>
<span class="r-in"><span>                        count <span class="op">=</span> <span class="va">Count</span>,</span></span>
<span class="r-in"><span>                        area_code <span class="op">=</span> <span class="va">AreaCode</span>,</span></span>
<span class="r-in"><span>                        local_area_code <span class="op">=</span> <span class="st">"AC122"</span>,</span></span>
<span class="r-in"><span>                        indicator <span class="op">=</span> <span class="va">IndicatorName</span>,</span></span>
<span class="r-in"><span>                        timeperiod <span class="op">=</span> <span class="va">Timeperiod</span>,</span></span>
<span class="r-in"><span>                        polarity <span class="op">=</span> <span class="va">Polarity</span>,</span></span>
<span class="r-in"><span>                        significance <span class="op">=</span> <span class="va">Significance</span>,</span></span>
<span class="r-in"><span>                        area_type <span class="op">=</span> <span class="va">AreaType</span>,</span></span>
<span class="r-in"><span>                        median_line_area_code <span class="op">=</span> <span class="st">"C001"</span>,</span></span>
<span class="r-in"><span>                        comparator_area_code <span class="op">=</span> <span class="st">"PAC12"</span>,</span></span>
<span class="r-in"><span>                        datatable <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                        relative_domain_text_size <span class="op">=</span> <span class="fl">0.75</span>,</span></span>
<span class="r-in"><span>                        relative_text_size <span class="op">=</span> <span class="fl">1.2</span>,</span></span>
<span class="r-in"><span>                        bar_width <span class="op">=</span> <span class="fl">0.68</span>,</span></span>
<span class="r-in"><span>                        indicator_label_nudgex <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>                        show_dividers <span class="op">=</span> <span class="st">"outer"</span>,</span></span>
<span class="r-in"><span>                        header_positions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">0.7</span>, <span class="op">-</span><span class="fl">0.44</span>, <span class="op">-</span><span class="fl">0.35</span>, <span class="op">-</span><span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>                                             <span class="op">-</span><span class="fl">0.15</span>, <span class="op">-</span><span class="fl">0.05</span>, <span class="fl">1.08</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        header_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Indicator"</span>, <span class="st">""</span>,</span></span>
<span class="r-in"><span>                                          <span class="st">"Time\nperiod"</span>,</span></span>
<span class="r-in"><span>                                          <span class="st">"Local\ncount"</span>,<span class="st">"Local\nvalue"</span>,</span></span>
<span class="r-in"><span>                                          <span class="st">"England\nvalue"</span>,</span></span>
<span class="r-in"><span>                                          <span class="st">"Worst/\nLowest"</span>,<span class="st">"Best/\nHighest"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        dps <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">full_p</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No shared levels found between `names(values)` of the manual scale and the</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> data's <span style="color: #00BB00;">colour</span> values.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No shared levels found between `names(values)` of the manual scale and the</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> data's <span style="color: #00BB00;">colour</span> values.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No shared levels found between `names(values)` of the manual scale and the</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> data's <span style="color: #00BB00;">colour</span> values.</span>
<span class="r-plt img"><img src="area_profiles-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## An example with domains and non-default indicator ordering</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_test_data.html">create_test_data</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">label_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>IndicatorName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">IndicatorName</span>,</span></span>
<span class="r-in"><span>                                      levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Indicator"</span>, <span class="va">label_order</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">area_profiles</span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>                   value <span class="op">=</span> <span class="va">Value</span>,</span></span>
<span class="r-in"><span>                   count <span class="op">=</span> <span class="va">Count</span>,</span></span>
<span class="r-in"><span>                   area_code <span class="op">=</span> <span class="va">AreaCode</span>,</span></span>
<span class="r-in"><span>                   local_area_code <span class="op">=</span> <span class="st">"AC122"</span>,</span></span>
<span class="r-in"><span>                   indicator <span class="op">=</span> <span class="va">IndicatorName</span>,</span></span>
<span class="r-in"><span>                   timeperiod <span class="op">=</span> <span class="va">Timeperiod</span>,</span></span>
<span class="r-in"><span>                   trend <span class="op">=</span> <span class="va">Trend</span>,</span></span>
<span class="r-in"><span>                   polarity <span class="op">=</span> <span class="va">Polarity</span>,</span></span>
<span class="r-in"><span>                   significance <span class="op">=</span> <span class="va">Significance</span>,</span></span>
<span class="r-in"><span>                   area_type <span class="op">=</span> <span class="va">AreaType</span>,</span></span>
<span class="r-in"><span>                   median_line_area_code <span class="op">=</span> <span class="st">"C001"</span>,</span></span>
<span class="r-in"><span>                   comparator_area_code <span class="op">=</span> <span class="st">"PAC12"</span>,</span></span>
<span class="r-in"><span>                   datatable <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                   relative_domain_text_size <span class="op">=</span> <span class="fl">0.75</span>,</span></span>
<span class="r-in"><span>                   relative_text_size <span class="op">=</span> <span class="fl">1.2</span>,</span></span>
<span class="r-in"><span>                   bar_width <span class="op">=</span> <span class="fl">0.68</span>,</span></span>
<span class="r-in"><span>                   indicator_label_nudgex <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>                   show_dividers <span class="op">=</span> <span class="st">"outer"</span>,</span></span>
<span class="r-in"><span>                   header_positions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">0.7</span>, <span class="op">-</span><span class="fl">0.53</span>, <span class="op">-</span><span class="fl">0.35</span>, <span class="op">-</span><span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>                                        <span class="op">-</span><span class="fl">0.15</span>, <span class="op">-</span><span class="fl">0.05</span>, <span class="fl">1.05</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   domain <span class="op">=</span> <span class="va">Domain</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span></span></span>
<span class="r-plt img"><img src="area_profiles-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Annabel Westermann, Sebastian Fox.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

